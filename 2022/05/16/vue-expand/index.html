<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Vue">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Vue生态 | 执笔丨梨花落</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.2"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">执笔丨梨花落</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">执笔丨梨花落</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/weihan-wu" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/weihan-wu" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/0.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Vue生态</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/JavaScript/">
                                <span class="chip bg-color">JavaScript</span>
                            </a>
                        
                            <a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">
                                <span class="chip bg-color">前端工程化</span>
                            </a>
                        
                            <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">
                                <span class="chip bg-color">前端开发</span>
                            </a>
                        
                            <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                                <span class="chip bg-color">学习笔记</span>
                            </a>
                        
                            <a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/">
                                <span class="chip bg-color">框架学习</span>
                            </a>
                        
                            <a href="/tags/Vue-js/">
                                <span class="chip bg-color">Vue.js</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Vue-js/" class="post-category">
                                Vue.js
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-05-16
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-05-16
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    11.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    53 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="VueCLI"><a href="#VueCLI" class="headerlink" title="VueCLI"></a>VueCLI</h1><p>是官方发布vue.js的项目脚手架，使用VueCLI可以快速搭建Vue开发环境以及对应的webpack配置</p>
<h2 id="VueCLI安装"><a href="#VueCLI安装" class="headerlink" title="VueCLI安装"></a>VueCLI安装</h2><h3 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a>全局安装</h3><pre class="line-numbers language-none"><code class="language-none">npm install @vue&#x2F;cli -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="拉取2-x模板"><a href="#拉取2-x模板" class="headerlink" title="拉取2.x模板"></a>拉取2.x模板</h3><p>我们在安装了VueCLI3.x时，如果还想使用VueCLI2.x，则可以拉取模板</p>
<pre class="line-numbers language-none"><code class="language-none">npm install @vue&#x2F;cli-init -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h2 id="CLI2初始化"><a href="#CLI2初始化" class="headerlink" title="CLI2初始化"></a><strong>CLI2初始化</strong></h2><p>项目名称自定义</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vue init webpack project-name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>需要输入的相关参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数作用</th>
</tr>
</thead>
<tbody><tr>
<td>Project name</td>
<td>项目名</td>
</tr>
<tr>
<td>Project description</td>
<td>项目描述</td>
</tr>
<tr>
<td>Author</td>
<td>项目作者</td>
</tr>
<tr>
<td>Vue build</td>
<td>项目构建方式</td>
</tr>
<tr>
<td>Install vue-router?</td>
<td>是否安装vue路由</td>
</tr>
<tr>
<td>Use ESLint to lint your code?</td>
<td>是否使用ESlint规范代码</td>
</tr>
<tr>
<td>Set up unit tests</td>
<td>是否安装单元测试</td>
</tr>
<tr>
<td>Setup e2e tests with Nightwatch</td>
<td>是否安装e2e自动化测试框架</td>
</tr>
<tr>
<td>Should we run <code>npm install</code> for you after the project has been created?</td>
<td>管理项目时用npm工具还是yarn工具</td>
</tr>
</tbody></table>
<h2 id="CLI3初始化"><a href="#CLI3初始化" class="headerlink" title="CLI3初始化"></a>CLI3初始化</h2><p>项目名称自定义</p>
<pre class="line-numbers language-none"><code class="language-none">vue create project-name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>需要输入的相关参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数作用</th>
</tr>
</thead>
<tbody><tr>
<td>Please pick a preset（default|Manually select features）</td>
<td>请选择配置（默认配置|手动配置）</td>
</tr>
<tr>
<td>Where do you prefer placing config for Babel, PostCSS, ESLint, etc.?（In dedicated config files|In package.json）</td>
<td>存放配置的位置（单独的配置文件|全放在package.json文件中）</td>
</tr>
<tr>
<td>Save this as a preset for future projects?</td>
<td>是否将上述配置存为默认方案</td>
</tr>
<tr>
<td>Save preset as</td>
<td>默认方案名</td>
</tr>
<tr>
<td>Pick the package manager to use when installing dependencies</td>
<td>选择包管理依赖</td>
</tr>
</tbody></table>
<h2 id="解决跨域"><a href="#解决跨域" class="headerlink" title="解决跨域"></a>解决跨域</h2><h3 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h3><p>为了避免CSRF攻击，浏览器端推出了CORS同源策略，而这也导致跨域问题的产生，我们也可以通过以下8种方式来解决跨域问题：</p>
<ol>
<li>JSONP：利用script标签的src属性获取数据不受跨域影响的特性，可以动态创建一个script标签来进行跨域的请求，只不过只支持get请求。</li>
<li>document.domain + iframe：在主域名相同的情况下，通过生成iframe标签，并且使用document.domain属性将两个页面的主域名设置为基础主域，就实现了同域。</li>
<li>location.hash + iframe ：a欲与b跨域相互通信，则使用中间页面c来实现。三个页面不同域之间用iframe的location.hash传值，同域则使用js直接访问。</li>
<li>window.name + iframe：通过iframe的src属性由外域转向本地域，跨域数据即由iframe的window.name从外传到本地域，但是window.name的长度仅有2M。</li>
<li>postMessage：H5中的API。</li>
<li>CORS：在后端设置响应头等信息。</li>
<li>代理服务器：配置一个代理服务器，这个代理服务器与前端同源，则前端可以直接获取到代理服务器上的数据；而代理服务器与真正的服务器之间没有浏览器上的同源策略，可以直接获取数据。</li>
<li>webSocket：在JS创建了web socket之后，会有一个HTTP请求发送到浏览器以发起连接。取得服务器响应后，建立的连接会使用HTTP升级从HTTP协议交换为web sockt协议。只有在支持web socket协议的服务器上才能正常工作。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yup1212/article/details/87633272?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-7.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-7.no_search_link">跨域的8种解决方法</a></p>
<h3 id="代理配置"><a href="#代理配置" class="headerlink" title="代理配置"></a>代理配置</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>当我们前端项目的路径为<a href="http://localhost:8081而后端服务器的路径为http://localhost:5000时，这会发送请求则会有跨域问题。">http://localhost:8081而后端服务器的路径为http://localhost:5000时，这会发送请求则会有跨域问题。</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:5000/students'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
     <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求成功！"</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
     <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求失败！"</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>我们可以在Vue-cli中，通过配置<code>vue.config.js</code>文件来给我们开启一个代理服务器。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//项目根目录中：vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 关闭语法检查</span>
  <span class="token literal-property property">lintOnSave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启代理服务器</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 代理指向要发送到的后端服务器</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   <span class="token comment">// 之后我们可以直接向代理服务器发送请求，就可以请求到后端服务器上的相应的数据</span>
   axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8081/students'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
     <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求成功！"</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
     <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求失败！"</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这种方法存在两点缺陷：</p>
<ol>
<li>相当于访问脚手架项目文件夹public内的资源，如果public文件夹中有与api同名的资源，则会优先读取public文件夹内的内容，导致内容读取错误。</li>
<li>这种方法只能配置指向单个服务器。</li>
</ol>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 关闭语法检查</span>
  <span class="token literal-property property">lintOnSave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启代理服务器（方式二）</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// /studentApi是请求前缀（可自定义），如果要走代理访问指定的服务器则在访问上加/studentApi</span>
      <span class="token comment">// 如不走代理想访问public中的资源就不加，比较灵活</span>
      <span class="token string-property property">'/studentApi'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span>
        <span class="token comment">// 需要将请求添加的前缀重写为空，否则发送给后端的url会错误（带上了前缀）</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token string-property property">"^/studentApi"</span><span class="token operator">:</span> <span class="token string">""</span>
      <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 通过代理服务器请求API</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8080/studentApi/students'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求成功！"</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求失败！"</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以在proxy中配置多个对象以完成对多个服务器的代理。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">lintOnSave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 开启代理服务器（方式二）</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token string-property property">'/studentApi'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ws</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//支持websocket</span>
        <span class="token comment">//用于控制请求头中的host值</span>
        <span class="token comment">//true：与服务器相同（5000）；false：与前端项目相同（8080 ）</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token string-property property">"^/studentApi"</span><span class="token operator">:</span> <span class="token string">""</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token string-property property">'/carApi'</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ws</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token string-property property">"^/carApi"</span><span class="token operator">:</span> <span class="token string">""</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//向第二个服务器发送请求</span>
<span class="token function">getCars</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8080/carApi/cars'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求成功！"</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"请求失败！"</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="Vue-Router"><a href="#Vue-Router" class="headerlink" title="Vue-Router"></a>Vue-Router</h1><p>问：什么是前端渲染？什么是后端渲染？（什么是前后端分离？|什么是前端路由？什么是后端路由？）</p>
<p>答：</p>
<ul>
<li>后端路由阶段：后端渲染是由jsp、php、asp等技术实现的。后端路由负责处理url和页面之间的映射关系。<ul>
<li>当前后端不分离时，我们输入url后，服务器会对url进行解析，通过正则对该url进行匹配，访问控制器中的方法从数据库中读取数据，最后返回的是一个HTML页面。</li>
<li>渲染好的页面无需加载任何js和css，可以直接给浏览器显示，有利于SEO的优化。</li>
<li>但是前后端不分离，对后端的工作量太大，并且前后端代码混杂一起，不利于维护。</li>
</ul>
</li>
<li>前后端分离阶段：Ajax出现后，由Ajax来请求数据，后端只负责提供API接口，前端可以将请求API接口返回的json数据通过Javascript渲染到页面上。</li>
<li>单页面富应用阶段：SPA（single page web application）整个页面只有一个HTML页面，主要特点就是前后端分离的基础上给页面加上了一层路由。在我们加载这个页面的时候已经向后端请求了所有数据，而前端路由仅仅只是生成路由来对应前端的页面组件，根据不同的路由显示不同的组件，改变了url并不会使页面刷新，而是显示了已经请求到的不同的数据。</li>
</ul>
<hr>
<p><strong>安装vue-router</strong></p>
<pre class="line-numbers language-none"><code class="language-none">npm install vue-router --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>我们可以在模块化工程中使用他（因为是一个插件，所以可以通过Vue.use()来安装路由功能）</p>
<ol>
<li><p>导入路由对象，并且调用Vue.use(VueRouter)使用插件</p>
</li>
<li><p>创建路由实例，传入路由映射配置，并且导出该路由实例</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//1、引入VueRouter</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">//2、使用Vue.use安装VueRouter插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token comment">//3、创建VueRouter对象，命名routes不可改变</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token comment">//在这里配置映射关系</span>
<span class="token punctuation">]</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token comment">//引入映射关系  </span>
    routes
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token comment">//4、将对象导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在Vue实例中挂载创建的路由实例</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token comment">//5、引入router</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>  
    <span class="token comment">//6、在Vue实例中挂载路由  </span>
    router<span class="token punctuation">,</span>  
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h2 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h2><ol>
<li><p>在components文件夹中创建组件</p>
</li>
<li><p>配置路由映射</p>
<ol>
<li><p>导入组件</p>
</li>
<li><p>配置映射关系</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token comment">//1、引入页面组件</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'../components/about'</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'../components/home'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token comment">//2、配置映射关系</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>Home  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>About  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    routes
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
</li>
<li><p>在App.js中使用路由</p>
<ul>
<li>router-link标签：类似于a标签，其to属性可以在点击标签后改变url</li>
<li>router-view标签：占位符，在这里面可以显示路由指向的组件的内容</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&quot;&gt;首页&lt;&#x2F;router-link&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;about&quot;&gt;关于&lt;&#x2F;router-link&gt;
     &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="router-link标签"><a href="#router-link标签" class="headerlink" title="router-link标签"></a>router-link标签</h3><table>
<thead>
<tr>
<th>属性</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>to</td>
<td>指定router-link标签点击后会调转到哪个url上</td>
</tr>
<tr>
<td>tag</td>
<td>指定router-link标签会被渲染成什么样的标签（button、li）</td>
</tr>
<tr>
<td>replace</td>
<td>表示使用history.replaceState()方式来替换路由，无法返回（可以没有值，默认为true）</td>
</tr>
<tr>
<td>active-class</td>
<td>在路由被点击时，框架会自动加上两个class（router-link-exact-active router-link-active），我们可以在标签上使用该属性来自定义router-link-active的值</td>
</tr>
</tbody></table>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&quot; tag&#x3D;&quot;button&quot; replace active-class&#x3D;&quot;active&quot;&gt;首页&lt;&#x2F;router-link&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;about&quot; replace active-class&#x3D;&quot;active&quot;&gt;关于&lt;&#x2F;router-link&gt;
    &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>对于active-class我们也可以在路由实例中添加linkActiveClass属性来统一自定义router-link-active的值</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token comment">//引入映射关系  </span>
    routes<span class="token punctuation">,</span>  
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">"history"</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">linkActiveClass</span><span class="token operator">:</span><span class="token string">"active"</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这样就可以通过这个类名来修改被触发了的样式</p>
<h2 id="路由模式"><a href="#路由模式" class="headerlink" title="路由模式"></a>路由模式</h2><h3 id="hash模式"><a href="#hash模式" class="headerlink" title="hash模式"></a>hash模式</h3><p>vuecli2默认使用的路由模式是hash模式，即在他的url上有一个#号，#号及以后的url就是hash值，并且不会包含在http请求中带给服务器。</p>
<h3 id="history模式"><a href="#history模式" class="headerlink" title="history模式"></a>history模式</h3><p>我们可以在路由实例中给他加一个mode参数，值为history来切换成history模式，以去除这个#号，但是若不经过服务端的处理，原本#号后面的url会被包含在http请求中带给服务器，导致404问题。</p>
<p>区别：</p>
<ul>
<li>hash模式兼容性较好，history模式兼容性较差。</li>
<li>hash模式一直要带个#号比较不美观，history模式比较美观。</li>
<li>若要将地址通过第三方手机分享，若app校验严格，hash模式的地址可能会被标记为不合法。</li>
<li>在项目要部署到服务器上时有区别：<ul>
<li>hash模式在项目打包完成部署到服务器上时，在url有了vue-router的前端路由时，再次向服务器请求静态资源时不会显示请求的静态资源不存在（404问题），因为此时浏览器会将hash的#号后面的url自动忽略，不会作为被包含在http请求中发送给服务器。</li>
<li>history模式在打包后，当url上有了vue-router的前端路由时，刷新页面时，前端路由的url会被浏览器包含在http请求中发送给服务器请求资源，此时会显示请求的资源不存在。</li>
<li>解决办法：<ul>
<li>如果我们要解决history模式打包后触发前端路由再刷新产生404的问题，需要后端配合，如：nodejs可以使用<code>connect-history-api-fallback</code>这个中间件。</li>
<li>可以使用<code>nginx</code>来分析传给后台的请求是前端路由还是后端路由。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="router"><a href="#router" class="headerlink" title="$router"></a>$router</h2><p>通过这个对象，我们可以不用router-link标签而是在js中进行路由的切换</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;!-- &lt;router-link to&#x3D;&quot;&#x2F;home&quot; tag&#x3D;&quot;button&quot; replace&gt;首页&lt;&#x2F;router-link&gt;  
	&lt;router-link to&#x3D;&quot;&#x2F;about&quot; replace&gt;关于&lt;&#x2F;router-link&gt; --&gt;
    &lt;button @click&#x3D;&quot;homeClick&quot;&gt;home&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;aboutClick&quot;&gt;about&lt;&#x2F;button&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  methods: &#123;
    homeClick() &#123;
      this.$router.push(&quot;&#x2F;home&quot;);
    &#125;,
    aboutClick() &#123;
      this.$router.push(&quot;&#x2F;about&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>$router</strong>的方法与pushState()和replaceState()相对应</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
    <span class="token function">homeClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        
        <span class="token comment">// this.$router.push("/home")        </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"/home"</span><span class="token punctuation">)</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
    <span class="token function">aboutClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        
        <span class="token comment">// this.$router.push("/about")        </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"/about"</span><span class="token punctuation">)</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="路由对象"><a href="#路由对象" class="headerlink" title="路由对象"></a>路由对象</h2><p>在路由关系表中，每一个对象都代表了一个路由以及他的配置，每个对象中都有固定的属性配置来管理该路由，如<code>path</code>属性的作用是当前url为该<code>path</code>的值时，使页面的router-view变成<code>component</code>属性指向的组件。</p>
<h3 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h3><p>当我们url内没有任何关于页面组件的参数时，我们可以以重定向的方式给他一个默认值，使他在没有具体路由的时候默认跳转到首页</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//映射关系</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token comment">//默认路由，重定向到/home  </span>
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>Home  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>About  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="children"><a href="#children" class="headerlink" title="children"></a>children</h3><p>children是一个数组，可以通过他来实现嵌套路由。</p>
<p>当我们希望在home页面中，通过/home/message和/home/news的一些内容，我们就需要用到嵌套路由。</p>
<p>一个路径映射一个组件，当我们访问这两个路径也会分别渲染两个组件。</p>
<p><strong>实现嵌套路由的步骤：</strong></p>
<ol>
<li><p>创建对应的子组件，并且在路由映射中配置对应的子路由。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home'</span><span class="token punctuation">)</span>
……
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
……  
<span class="token punctuation">&#123;</span>    
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
    <span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>    
    <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>     
    <span class="token comment">//嵌套路由同样可以实现路由的重定向      </span>
    <span class="token punctuation">&#123;</span>        
    	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>        
    	<span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'news'</span>      
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
    <span class="token punctuation">&#123;</span>        
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>        
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/HomeNews'</span><span class="token punctuation">)</span>      
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
    <span class="token punctuation">&#123;</span>        
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'message'</span><span class="token punctuation">,</span>        
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/HomeMessage'</span><span class="token punctuation">)</span>      
    <span class="token punctuation">&#125;</span>    
	<span class="token punctuation">]</span>  
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
……
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在父组件内部使用<strong>router-view</strong>标签。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;home&lt;&#x2F;h2&gt;
    &lt;!--父组件内的链接需要写完整的路由--&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;news&quot; tag&#x3D;&quot;button&quot;&gt;新闻&lt;&#x2F;router-link&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;message&quot; tag&#x3D;&quot;button&quot;&gt;消息&lt;&#x2F;router-link&gt;
    &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>在路由对象里加上name属性，之后就可以使用name代替path进行跳转，在嵌套路由的路径过长时可以简化写法。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">&#123;</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#123;</span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>News<span class="token punctuation">,</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'message'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>Message<span class="token punctuation">,</span>
					<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
						<span class="token punctuation">&#123;</span>
							<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
							<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
							<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
						<span class="token punctuation">&#125;</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 命名路由前 --&gt;
&lt;router-link :to&#x3D;&quot;&#96;&#x2F;home&#x2F;message&#x2F;detail?id&#x3D;$&#123;m.id&#125;&amp;title&#x3D;$&#123;m.title&#125;&#96;&quot;&gt;&#123;&#123;m.title&#125;&#125;&lt;&#x2F;router-link&gt;
&lt;!-- 命名路由后 --&gt;
&lt;router-link :to&#x3D;&quot;&#123;name:&#39;xiangqing&#39;,query:&#123;id:m.id,title:m.title&#125;&#125;&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><p><code>meta</code>（路由源信息），是设计者给开发者提供的一个用于存放自定义信息的容器。</p>
<p>因为路由对象中每组key——value都是设计者指定好的，我们没法随意更改，但是我们可以通过<code>meta</code>来自定义一些属性。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xinwen'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">component</span><span class="token operator">:</span>News<span class="token punctuation">,</span>
 	<span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token literal-property property">isAuth</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'新闻'</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="动态路由对象"><a href="#动态路由对象" class="headerlink" title="动态路由对象"></a>动态路由对象</h2><p>当我们在某种情况，例如进行修改操作时，我们需要在url上带上id，有以下步骤：</p>
<ol>
<li><p>在App.vue的data属性中获取到要修改的id</p>
</li>
<li><p>使用v-bind将他绑定到router-link标签上</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    ……
    &lt;router-link :to&#x3D;&quot;&#39;&#x2F;user&#x2F;&#39; + id&quot; tag&#x3D;&quot;button&quot; replace&gt;用户&lt;&#x2F;router-link&gt;
    ……
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  &#x2F;&#x2F;动态地获取到id
  data() &#123;
    return &#123;
      id: 2,
    &#125;;
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;button @click&#x3D;&quot;userClick&quot;&gt;用户&lt;&#x2F;button&gt; 
    &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  data() &#123;
    return &#123; id: 2 &#125;;
  &#125;,
  methods: &#123;
    userClick() &#123;
      this.$router.push(&quot;&#x2F;user&#x2F;&quot; + this.id);
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在路由中使用**:id**建立动态的路由映射</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    ……  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>User  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="route"><a href="#route" class="headerlink" title="$route"></a>$route</h3><p>$route是当前正活跃的路由对象，在user.vue模板中用**$route**来获取动态路由传输过来的值</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;user&lt;&#x2F;h2&gt;
    &lt;!-- &lt;h3&gt;当前档案的id为：&#123;&#123;$route.params.id&#125;&#125;&lt;&#x2F;h3&gt; --&gt;
    &lt;h3&gt;当前用户的id为：&#123;&#123; id &#125;&#125;&lt;&#x2F;h3&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;&lt;script&gt;
export default &#123;
  name: &quot;user&quot;,
  computed: &#123;
    id() &#123;
      return this.$route.params.id;
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>问：$router和$route的区别？</p>
<p>答：$router是VueRouter路由实例，能通过$router.push等方法导航到不同的URL；$route指的是目前处于活跃的路由，也就是调转过来的URL，可以用他来取得该路由里面的内容</p>
<h3 id="params"><a href="#params" class="headerlink" title="params"></a>params</h3><ul>
<li>配置路由格式：/router/:id</li>
<li>传递方式：在path后跟上对应的值</li>
<li>传递后形成的路径：/router/1|/router/abc</li>
<li>当想使用params传参时，对象写法中必须使用<strong>命名路由</strong>，否则会使路径匹配混乱。</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">&#123;</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>About
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#123;</span>
			<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>
			<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>News<span class="token punctuation">,</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token punctuation">&#123;</span>
					<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'message'</span><span class="token punctuation">,</span>
					<span class="token literal-property property">component</span><span class="token operator">:</span>Message<span class="token punctuation">,</span>
					<span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>
						<span class="token punctuation">&#123;</span>
							<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
							<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail/:id/:title'</span><span class="token punctuation">,</span>
							<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
						<span class="token punctuation">&#125;</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;router-link :to&#x3D;&quot;&#123;name:&#39;xiangqing&#39;,params:&#123;id:m.id,title:m.title&#125;&#125;&quot;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="query"><a href="#query" class="headerlink" title="query"></a>query</h3><ul>
<li><p>配置路由格式：/router（也就是普通配置）</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    ……  
<span class="token punctuation">&#123;</span>    
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/profile'</span><span class="token punctuation">,</span>    
    <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Profile.vue'</span><span class="token punctuation">)</span>  
<span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p> 传递的方式：对象中使用query的key作为传递方式（在router-link标签中使用v-bind绑定路由对象）</p>
</li>
</ul>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--方式一--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;path:<span class="token punctuation">'</span>/profile<span class="token punctuation">'</span>,query:&#123;id:2&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">replace</span><span class="token punctuation">></span></span>档案<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

  <pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!--方式二--&gt;
&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;button @click&#x3D;&quot;profileClick&quot;&gt;档案&lt;&#x2F;button&gt; &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  data() &#123;
    return &#123; id: 2 &#125;;
  &#125;,
  methods: &#123;
    profileClick() &#123;
      this.$router.push(&#123; path: &quot;&#x2F;profile&quot;, query: &#123; id: this.id &#125; &#125;);
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>传递后形成的路径：/router?id=1|/router?id=abc</p>
<pre class="line-numbers language-http" data-language="http"><code class="language-http">http:&#x2F;&#x2F;localhost:8080&#x2F;profile?id&#x3D;2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><p>在路由组件中使用$route获取参数</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;profile&lt;&#x2F;h2&gt;
    &lt;!-- &lt;h3&gt;当前档案的id为：&#123;&#123;$route.query.id&#125;&#125;&lt;&#x2F;h3&gt; --&gt;
    &lt;h3&gt;当前档案的id为：&#123;&#123; id &#125;&#125;&lt;&#x2F;h3&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
  name: &quot;Profile&quot;,
  computed: &#123;
    id() &#123;
      return this.$route.query.id;
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><p>当我们需要使用<code>$route</code>来获取<code>query</code>或<code>params</code>传来的参数时，需要一个个去获取，当要获取的参数太多时，会产生很多冗余代码，此时我们就可以在路由中配置<code>props</code>参数用来优化代码。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="对象写法"><a href="#对象写法" class="headerlink" title="对象写法"></a>对象写法</h4><p>props的第一种写法，值为对象，该对象中的所有key-value都会以props的形式传给Detail组件。</p>
<p>缺点是这个写法都是死数据，一般不使用。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
	<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'hello'</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;ul&gt;
		&lt;li&gt;消息编号：&#123;&#123;id&#125;&#125;&lt;&#x2F;li&gt;
		&lt;li&gt;消息标题：&#123;&#123;title&#125;&#125;&lt;&#x2F;li&gt;
	&lt;&#x2F;ul&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
	export default &#123;
		name:&#39;Detail&#39;,
		props:[&#39;id&#39;,&#39;title&#39;],
        &#x2F;&#x2F;获取方式与组件间通信相同，直接调用props中的属性就可以免去写许多冗余代码
		&#x2F;&#x2F; computed: &#123;
		&#x2F;&#x2F; 	id()&#123;
		&#x2F;&#x2F; 		return this.$route.query.id
		&#x2F;&#x2F; 	&#125;,
		&#x2F;&#x2F; 	title()&#123;
		&#x2F;&#x2F; 		return this.$route.query.title
		&#x2F;&#x2F; 	&#125;,
		&#x2F;&#x2F; &#125;,
	&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="布尔写法"><a href="#布尔写法" class="headerlink" title="布尔写法"></a>布尔写法</h4><p>props的第二种写法，值为布尔值，若布尔值为真，就会把该路由组件收到的所有params参数，以props的形式传给Detail组件。</p>
<p>缺点是无法传递query参数。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
	<span class="token literal-property property">props</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="函数写法"><a href="#函数写法" class="headerlink" title="函数写法"></a>函数写法</h4><p>props的第三种写法，值为函数，这只是把获取参数的方式放到路由里面，更加清晰。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
 	<span class="token function">props</span><span class="token punctuation">(</span><span class="token parameter">$route</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
 		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
 			<span class="token literal-property property">id</span><span class="token operator">:</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  			<span class="token literal-property property">title</span><span class="token operator">:</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
 			<span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
 			<span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'hello'</span>
 		<span class="token punctuation">&#125;</span>
 	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>可以使用解构赋值的连续写法来进一步简化代码。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">component</span><span class="token operator">:</span>Detail<span class="token punctuation">,</span>
    <span class="token comment">//相当于从$route中取出query，接着在query中取出id和title</span>
 	<span class="token function">props</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span><span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>id<span class="token punctuation">,</span>title<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
 		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
 			id<span class="token punctuation">,</span>
  			title<span class="token punctuation">,</span>
 			<span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
 			<span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'hello'</span>
 		<span class="token punctuation">&#125;</span>
 	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h2><p>当一个打包构建应用时，Javascript包会变得非常大，影响页面加载。如果我们将不同路由对应的组件分成不同的代码块，当路由被访问的时候才加载对应组件，这样就会变得更加高效。</p>
<p>即我们在路由中通常会定义许多页面，将这些包打包在一个js文件中会使这一个页面非常大，我们一次性请求下来会花费一定时间，甚至在电脑上出现了短暂空白的情况，此时可以用<strong>路由懒加载</strong>解决。</p>
<p>路由懒加载的主要作用时将路由对应的组件打包成一个个的JS代码块，只有当这个路由被访问到的时候才加载对应的组件。</p>
<p>写法：（在路由映射表内，使用到该路由再引入组件，此时就不需要再在上面引入路由组件）</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//引入页面组件</span>
<span class="token comment">// import About from '../components/about'</span>
<span class="token comment">// import Home from '../components/home'</span>
<span class="token comment">// import User from '../components/user'</span>
……
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
        <span class="token comment">// component:Home    </span>
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/home'</span><span class="token punctuation">)</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>    
        <span class="token comment">// component:About    </span>
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/about'</span><span class="token punctuation">)</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>    
        <span class="token comment">// component:User    </span>
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/user'</span><span class="token punctuation">)</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>优化写法：（定义一个常量，将箭头函数提取出去）</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//懒加载写法</span>
<span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/about'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/home'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">User</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/user'</span><span class="token punctuation">)</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>
<span class="token comment">//3、创建VueRouter对象</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>Home  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>About  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>User  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<h2 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h2><h3 id="全局前置守卫"><a href="#全局前置守卫" class="headerlink" title="全局前置守卫"></a>全局前置守卫</h3><p>是一个前置钩子，能在路由跳转前调用此钩子进行各种操作，例如，在组件跳转时更改document.title的内容</p>
<ol>
<li><p>先在路由映射表里为路由添加一个对象meta，meta中用title属性存放该组件对应的document.title</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'/home'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>Home<span class="token punctuation">,</span>    
        <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"主页"</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">children</span><span class="token operator">:</span><span class="token punctuation">[</span>      
            <span class="token punctuation">&#123;</span>        
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>        
                <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">'news'</span>      
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span>        
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'news'</span><span class="token punctuation">,</span>        
                <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/HomeNews'</span><span class="token punctuation">)</span>      
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span>        
                <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'message'</span><span class="token punctuation">,</span>        
                <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/HomeMessage'</span><span class="token punctuation">)</span>      
            <span class="token punctuation">&#125;</span>    
        <span class="token punctuation">]</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"关于"</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>About  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"用户"</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">component</span><span class="token operator">:</span>User  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/profile'</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"档案"</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token function-variable function">component</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Profile.vue'</span><span class="token punctuation">)</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>使用router对象内的beforeEach方法创建路由导航守卫</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  
    <span class="token comment">//使标题为目的组件的标题  </span>
    <span class="token comment">//matched[0]能使有嵌套路由的组件也被捕获到，不会有undefined的状况  </span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> to<span class="token punctuation">.</span>matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title  
    <span class="token comment">//设置完标题后执行下一步  </span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>to：Route即将要进入的目标路由对象</li>
<li>from：Route当前导航正要离开的路由对象</li>
<li>next：是一个方法，一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数：<ul>
<li>next()：参数为空。进行管道中的下一个钩子，如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。</li>
<li>next(false)：参数为false。中断当前的导航，如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。</li>
<li>next(‘/‘) 或者 next({ path: ‘/‘ })：参数为一个路由地址或一个如同映射表里面一样的路由对象。跳转到一个不同的地址，当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置<strong>对象</strong>，且允许设置诸如 replace: true、name: ‘home’ 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。</li>
<li>next(error)：参数为一个error实例。导航会被中止并且该错误会被传递给router.onError()注册过的回调。</li>
<li>注意：确保要调用 <strong>next</strong> 方法，否则钩子就不会被 resolved。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="全局后置守卫"><a href="#全局后置守卫" class="headerlink" title="全局后置守卫"></a>全局后置守卫</h3><p>是一个后置钩子，在页面跳转后调用，与前置守卫不同的是，他只有to和from对象，无需主动调用next()函数。</p>
<p>通常用来改网站的title。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span><span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'后置守卫'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h3><p>在路由映射表内直接定义beforeEnter钩子函数</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>  
    ……  
<span class="token punctuation">&#123;</span>    
    <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>    
    <span class="token literal-property property">meta</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
    	<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">"用户"</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
    <span class="token literal-property property">component</span><span class="token operator">:</span>User<span class="token punctuation">,</span>    
    <span class="token function">beforeEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span>      
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
    <span class="token punctuation">&#125;</span>  
<span class="token punctuation">&#125;</span>  
……
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>参数与全局前置守卫一样</p>
<h3 id="组件内部守卫"><a href="#组件内部守卫" class="headerlink" title="组件内部守卫"></a>组件内部守卫</h3><p>能在路由组件内部直接定义以下路由导航守卫：</p>
<ul>
<li>beforeRouteEnter：通过路由规则进入组件时被调用</li>
<li>beforeRouteUpdate</li>
<li>beforeRouteLeave：通过路由规则离开组件时被调用</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;h2&gt;我是About的内容&lt;&#x2F;h2&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
	export default &#123;
		name:&#39;About&#39;,
		&#x2F;&#x2F;通过路由规则，进入该组件时被调用
		beforeRouteEnter (to, from, next) &#123;
			console.log(&#39;About--beforeRouteEnter&#39;,to,from)
			if(to.meta.isAuth)&#123; &#x2F;&#x2F;判断是否需要鉴权
				if(localStorage.getItem(&#39;school&#39;)&#x3D;&#x3D;&#x3D;&#39;atguigu&#39;)&#123;
					next()
				&#125;else&#123;
					alert(&#39;学校名不对，无权限查看！&#39;)
				&#125;
			&#125;else&#123;
				next()
			&#125;
		&#125;,
		&#x2F;&#x2F;通过路由规则，离开该组件时被调用
		beforeRouteLeave (to, from, next) &#123;
			console.log(&#39;About--beforeRouteLeave&#39;,to,from)
			next()
		&#125;
	&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>参数与前面的都一样</p>
<h2 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h2><p>keep-alive是Vue内置的一个组件，可以使被包含的组件保留状态，或避免重新渲染，提高性能</p>
<p>他有两个重要的属性，值为字符串或正则表达式：</p>
<ul>
<li>include（包含）：只有匹配的组件会被缓存</li>
<li>exclude（排除）：任何匹配的组件都不会被缓存</li>
</ul>
<p>值里面不能加空格！</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">exclude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Profile,User<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>如果要保留组件内嵌套路由的状态，思路如下：</p>
<ol>
<li>清除嵌套路由内的默认路由</li>
<li>给组件一个默认的path值，使用activated钩子函数使每次打开这个组件就跳转到这个默认值（替换了第一步的默认路由）</li>
<li>调用组件内部守卫beforeRouteLeave()更新记录当前组件的路由，使下次组件再被激活时就调用activated钩子函数打开这个默认路由</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;home&lt;&#x2F;h2&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;news&quot; tag&#x3D;&quot;button&quot;&gt;新闻&lt;&#x2F;router-link&gt;
    &lt;router-link to&#x3D;&quot;&#x2F;home&#x2F;message&quot; tag&#x3D;&quot;button&quot;&gt;消息&lt;&#x2F;router-link&gt;
    &lt;router-view&gt;&lt;&#x2F;router-view&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
  name: &quot;Home&quot;,
  data() &#123;
    return &#123;
      path: &quot;&#x2F;home&#x2F;news&quot;,
    &#125;;
  &#125;,
  activated() &#123;
    this.$router.push(this.path);
  &#125;,
  beforeRouteLeave(to, from, next) &#123;
    this.path &#x3D; this.$route.path;
    next();
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="activated"><a href="#activated" class="headerlink" title="activated()"></a>activated()</h3><p>钩子函数之一，只有该组件被keep-alive保持了状态才能生效，在被keep-alive标签包裹的组件激活后会调用此钩子函数。</p>
<h3 id="deactivated"><a href="#deactivated" class="headerlink" title="deactivated()"></a>deactivated()</h3><p>钩子函数之一，只有该组件被keep-alive保持了状态才能生效，在被keep-alive标签包裹的组件销毁后会调用此钩子函数。</p>
<h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><p>是一个转为Vue.js应用程序开发的<strong>状态管理</strong>模式。采用<strong>集中式存储管理</strong>应用的所有组件的状态，并且以相应的规则保证状态以一种可预测的方式发生变化。</p>
<p>例如多个组件组要判断是否登录的状态，而这个状态放在任意单独组件都不合适，Vuex就负责管理这个状态，组件需要该状态时就可以从Vuex里面取。并且Vuex里面的状态是<strong>响应式</strong>的，一旦一个组件改动了该状态，其他相关组件的状态也会跟着更改。</p>
<p>Vuex共享的状态如：登录状态（token）、用户名、头像、地理位置信息、商品的收藏、购物车中的物品等。</p>
<h3 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h3><pre class="line-numbers language-none"><code class="language-none">npm install vuex --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol>
<li><p>我们一般在src文件夹创建一个store文件夹，在里面编写一个index.js文件用来引用Vuex插件</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">//1、导入安装插件</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token comment">//2、创建对象</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token comment">//3、导出store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在main.js中引用Vuex并且挂载到Vue实例上</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>  
    router<span class="token punctuation">,</span>  
    store<span class="token punctuation">,</span>  
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>我们就可以在组件上使用$store对象取得Vuex里面存的状态数据</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<h3 id="单页面状态管理"><a href="#单页面状态管理" class="headerlink" title="单页面状态管理"></a>单页面状态管理</h3><p><img src="D:\课程资料\前端开发\自学笔记\img\单页面状态管理.png" alt="image-20210721110400536"></p>
<ul>
<li>State：状态（data中的数据）</li>
<li>View：视图层，对State的展示，有能对State进行操作的Actions</li>
<li>Actions：用户的操作，改变State</li>
</ul>
<h4 id="修改状态"><a href="#修改状态" class="headerlink" title="修改状态"></a>修改状态</h4><p>我们使用$store取得状态时，可以直接在方法里，把这个状态当成一个普通的值进行修改，但是这种方式不推荐</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>&#123;&#123;$store.state.counter&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$store.state.counter++<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$store.state.counter--<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>这种方式当我们对state修改后，难以对这次修改进行跟踪</p>
<h3 id="多页面状态管理"><a href="#多页面状态管理" class="headerlink" title="多页面状态管理"></a>多页面状态管理</h3><p><img src="D:\课程资料\前端开发\自学笔记\img\多页面状态管理.png" alt="image-20210722171819598"></p>
<p>Vue官方提供的Devtools插件，在我们通过Mutations进行修改时，就可以跟踪到修改来源</p>
<ol>
<li><p>在Vuex实例的Mutations属性中添加方法，将想要对state进行修改的操作定义在这里面</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            state<span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token function">decrement</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            state<span class="token punctuation">.</span>counter<span class="token operator">--</span><span class="token punctuation">;</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在想要修改状态的组件的methods中，通过this.$store.commit()的方法去调用Vuex实例中的方法对state中的数据进行修改（commit()的参数为mutations里面预定义的方法名）</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>  
    ……  
    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"increment"</span><span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"decrement"</span><span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span>  
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><p>State、Getter、Mutation、Action、Module</p>
<h4 id="State"><a href="#State" class="headerlink" title="State"></a>State</h4><p><strong>State单一状态树</strong></p>
<p>如果我们将状态信息保存到多个Store对象中，那么之后的管理和维护都会变得特别困难，因此我们在一个项目中，只建一个Store</p>
<p>我们将所有状态信息都放在一个State中进行管理</p>
<h4 id="Getters"><a href="#Getters" class="headerlink" title="Getters"></a>Getters</h4><p>类似于单个组件内的计算属性</p>
<p>使用步骤：</p>
<ol>
<li><p>在store中定义getters属性，像计算属性一样定义方法，并且将state作为参数传入进行操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">counterplus</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>counter<span class="token operator">*</span>state<span class="token punctuation">.</span>counter    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>  
    ……
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在组件中可以直接把这个设定的方法当作一个属性来调用</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;h2&gt;&#123;&#123;$store.getters.counterplus&#125;&#125;&lt;&#x2F;h2&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<h5 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h5><p>当我们需要在state的学生信息中取出年龄大于20的学生信息</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">student</span><span class="token operator">:</span><span class="token punctuation">[</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"zs"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ls"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">112</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ww"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ml"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">&#125;</span>    
        <span class="token punctuation">]</span>  
    <span class="token punctuation">&#125;</span>  
    ……
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>使用计算属性实现</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;h3&gt;使用计算属性&lt;&#x2F;h3&gt;
    &lt;h3&gt;&#123;&#123; more20stu &#125;&#125;&lt;&#x2F;h3&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  computed: &#123;
    more20stu() &#123;
      return this.$store.state.student.filter((student) &#x3D;&gt; student.age &gt; 20);
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>但是这种方法如果要在另一个组件中也取得同样的数据，我们就需要在另一个组件中也使用计算属性，这就造成了代码的重复</p>
<p><strong>使用getters实现</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>    
        <span class="token literal-property property">student</span><span class="token operator">:</span><span class="token punctuation">[</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"zs"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ls"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">112</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ww"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ml"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">&#125;</span>    
        <span class="token punctuation">]</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">more20stu</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">student</span> <span class="token operator">=></span> student<span class="token punctuation">.</span>age <span class="token operator">></span><span class="token number">20</span><span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.more20stu&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>getters同样可以作为一个参数进行传递</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
    <span class="token function">more20stu</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">student</span> <span class="token operator">=></span> student<span class="token punctuation">.</span>age <span class="token operator">></span><span class="token number">20</span><span class="token punctuation">)</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
    <span class="token function">more20stuLen</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>getters</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
         <span class="token keyword">return</span> getters<span class="token punctuation">.</span>more20stu<span class="token punctuation">.</span>length    
    <span class="token punctuation">&#125;</span>  
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.more20stuLen&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>getters内的方法的返回值可以是一个方法，组件内就可以将这个属性作为一个方法调用，对其进行传值</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">student</span><span class="token operator">:</span><span class="token punctuation">[</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"zs"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ls"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">112</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ww"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      
            <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"ml"</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">&#125;</span>    
        <span class="token punctuation">]</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">more20stu</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">student</span> <span class="token operator">=></span> student<span class="token punctuation">.</span>age <span class="token operator">></span><span class="token number">20</span><span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token function">more20stuLen</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>getters</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> getters<span class="token punctuation">.</span>more20stu<span class="token punctuation">.</span>length    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token function">moreAgeStu</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> <span class="token parameter">age</span> <span class="token operator">=></span><span class="token punctuation">&#123;</span>        
                <span class="token keyword">return</span> state<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">student</span> <span class="token operator">=></span> student<span class="token punctuation">.</span>age<span class="token operator">></span>age<span class="token punctuation">)</span>      
            <span class="token punctuation">&#125;</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.more20stu&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.more20stuLen&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.moreAgeStu(30)&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h4 id="Mutations"><a href="#Mutations" class="headerlink" title="Mutations"></a>Mutations</h4><p>Vuex的store状态的唯一的更新方式：提交Mutation</p>
<p>Mutation主要包括两部分：</p>
<ul>
<li>字符串的事件类型（type）</li>
<li>一个回调函数（handler），该回调函数的第一个参数就是state</li>
</ul>
<p>使用例子见多页面状态管理</p>
<p>除了state，还可以给Mutation传入其他参数（甚至是一个对象），这些参数被称为是mutation的载荷（Payload）</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div id&#x3D;&quot;app&quot;&gt;
    &lt;h2&gt;&#123;&#123; $store.state.counter &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;addCount(5)&quot;&gt;+5&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;addCount(10)&quot;&gt;+10&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;addStu&quot;&gt;添加学生&lt;&#x2F;button&gt;
    &lt;h3&gt;&#123;&#123; $store.state.student &#125;&#125;&lt;&#x2F;h3&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;&lt;script&gt;
export default &#123;
  name: &quot;App&quot;,
  methods: &#123;
    addCount(count) &#123;
      this.$store.commit(&quot;incrementCount&quot;, count);
    &#125;,
    addStu() &#123;
      this.$store.commit(&quot;addStudent&quot;);
    &#125;,
  &#125;,
&#125;;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">counter</span><span class="token operator">:</span><span class="token number">1000</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">incrementCount</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>count</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> count<span class="token punctuation">;</span>    
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
        <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">const</span> stu <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        
                <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">114</span><span class="token punctuation">,</span>        
                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"qq"</span><span class="token punctuation">,</span>        
                <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">45</span>      
            <span class="token punctuation">&#125;</span>      
            state<span class="token punctuation">.</span>student<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Mutation的commit()除了上面那种普通提交格式，还能给他传入一个对象作为提交参数</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>	
    <span class="token comment">//普通提交方式    </span>
    <span class="token comment">// this.$store.commit("incrementCount",count)	</span>
    <span class="token comment">//特殊提交方式    </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>        
        <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'incrementCount'</span><span class="token punctuation">,</span>        
        count    
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>但是如果以这种提交风格，count会变成一个对象，需要取对象内的count才能获取到具体的值，因此我们要以这种风格传参时，一般把第二个参数写为payload</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">incrementCount</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token comment">//console.log(count)    </span>
    <span class="token comment">//state.counter += count.count;    </span>
    state<span class="token punctuation">.</span>counter <span class="token operator">+=</span> payload<span class="token punctuation">.</span>count
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="响应规则"><a href="#响应规则" class="headerlink" title="响应规则"></a>响应规则</h5><p>Vuex的store中的state是响应式的, 当state中的数据发生改变时, Vue组件会自动更新。</p>
<p>因此我们需要遵守Vuex的一些规则：</p>
<ul>
<li><p>提前在store中初始化好所需的属性。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">info</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'wwh'</span><span class="token punctuation">,</span>      
            <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">'man'</span><span class="token punctuation">,</span>      
            <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">21</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>&#123;&#123;$store.state.info&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>当初始化内容发生改变时，Vue会对该变化进行监听，并且通知使用到该内容的组件发生变化，但是如果我们直接往里面加东西，该信息只会进入state，但不会进入到Vue的响应式系统里面，就不会发生响应式</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
    <span class="token comment">// state.info.name='wh'      </span>
    state<span class="token punctuation">.</span>info<span class="token punctuation">[</span><span class="token string">'addr'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">'福建泉州'</span>    
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>当给state中的对象添加新属性时, 需要使用Vue的响应式方法，如使用下面的方式：</p>
<ul>
<li><p>使用Vue.set(obj, key, value)</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token comment">// state.info.name='wh'    </span>
    <span class="token comment">//非响应式    </span>
    <span class="token comment">// state.info['addr']='福建泉州'    </span>
    <span class="token comment">//响应式    </span>
    Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>info<span class="token punctuation">,</span><span class="token string">'addr'</span><span class="token punctuation">,</span><span class="token string">'福建泉州'</span><span class="token punctuation">)</span>    
    Vue<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>info<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>用新对象给旧对象重新赋值</p>
</li>
</ul>
</li>
</ul>
<h5 id="命名统一"><a href="#命名统一" class="headerlink" title="命名统一"></a>命名统一</h5><p>官方网站推荐将mutation里的方法名和组件里commit()的值做一个统一，我们可以将该名字以模块化的形式定义成常量导出，然后在我们需要用到该方法的地方引入，这样就做到的组件和Vuex的统一命名，便于管理、防止出错。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//store/mutation-types.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">'increment'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!--App.vue--&gt;
……
&lt;script&gt;
    import HelloVuex from &#39;@&#x2F;components&#x2F;HelloVuex&#39;;
    import &#123; INCREMENT &#125; from &#39;.&#x2F;store&#x2F;mutation-types&#39;;
    ……  
    methods:&#123;    
        add()&#123;      
            this.$store.commit(INCREMENT)    
        &#125;  
    &#125;
    ……
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">……
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> <span class="token constant">INCREMENT</span> <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./mutation-types'</span>
……  
<span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
    <span class="token comment">//类似数组的写法    </span>
    <span class="token punctuation">[</span><span class="token constant">INCREMENT</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
        state<span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>    
    <span class="token punctuation">&#125;</span>
……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="同步函数"><a href="#同步函数" class="headerlink" title="同步函数"></a>同步函数</h5><p>Vuex要求我们mutations中的方法必须是同步方法。</p>
<p>主要因为当我们使用devtools时，可以使用该插件帮我们捕捉mutation快照，但如果是异步操作则没法进行跟踪。</p>
<h4 id="Actions"><a href="#Actions" class="headerlink" title="Actions"></a>Actions</h4><p>当我们需要在Vuex里进行异步操作时，应该使用Actions来替代Mutations</p>
<p>使用步骤如下：</p>
<ol>
<li><p>定义好state和要对state进行操作的mutations方法</p>
</li>
<li><p>编写actions里的方法，在actions使用context.commit()将操作提交到mutations</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token comment">//1、定义state与mutations  </span>
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">info</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      
            <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'wwh'</span><span class="token punctuation">,</span>      
            <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">'man'</span><span class="token punctuation">,</span>      
            <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">21</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>info<span class="token punctuation">,</span><span class="token string">'addr'</span><span class="token punctuation">,</span><span class="token string">'福建泉州'</span><span class="token punctuation">)</span>      
            Vue<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>info<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">)</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token comment">//2、定义actions  </span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token comment">//方法的参数固定为context    </span>
        <span class="token function">aUpdateInfo</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        
                context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">)</span>      
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>在页面里面通过dispatch调用actions里面的方法</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">updateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'aUpdateInfo'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ol>
<p>与mutations一样，actions也可以通过payload传递参数</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//Vuex中</span>
<span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
    <span class="token function">aUpdateInfo</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        
            context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">)</span>        
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>message<span class="token punctuation">)</span>        
            payload<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">&#125;</span>  
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//组件中</span>
<span class="token function">updateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'aUpdateInfo'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>        
        <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">"携带的信息"</span><span class="token punctuation">,</span>        
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"操作成功"</span><span class="token punctuation">)</span>        
        <span class="token punctuation">&#125;</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="异步写法"><a href="#异步写法" class="headerlink" title="异步写法"></a>异步写法</h5><p>说到异步就不得不提到Promise了，我们actions里面的方法可以将一个Promise对象作为返回值，并且他的resolve()跟着的then()方法可以写在调用了该actions方法的组件中</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//Vuex的Action</span>
<span class="token function">aUpdateInfo</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>            
            context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">)</span>            
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"操作成功"</span><span class="token punctuation">)</span>        
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//App.vue</span>
<span class="token function">updateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'aUpdateInfo'</span><span class="token punctuation">,</span><span class="token string">'携带的信息'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>也就是哪个组件调用了actions中的方法后，Promise会把处理的信息返回给那个调用了actions中方法的组件，然后我们就可以在这个组件中的dispatch()方法后使用then()进行操作</p>
<h4 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h4><p>Vue运行时采用单一状态树，这导致Vuex可能需要处理许多状态，而这可能使store对象变得十分臃肿</p>
<p>因此我们可以将store分成许多块Module，每个Module拥有自己的state、mutations、actions、getters</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">……
<span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三三'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>……<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>……<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>……<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">actions</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>……<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  
    <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        moduleA  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
……<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.state.moduleA.name&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h5 id="Mutations-1"><a href="#Mutations-1" class="headerlink" title="Mutations"></a>Mutations</h5><p>模块中的mutations的编写方法与Vuex实例中的一样，注意的是提交的方法不能与store中的Mutations中的方法重复</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//store的module中</span>
<span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  
    <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'张三三'</span>  
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">mutations</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
        <span class="token function">updateName</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>      
            <span class="token keyword">return</span> state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'张三'</span>    
        <span class="token punctuation">&#125;</span>  
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//组件中</span>
<span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">"updateName"</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="Getters-1"><a href="#Getters-1" class="headerlink" title="Getters"></a>Getters</h5><p><strong>getters的使用方法与设置方法与store中的一致</strong></p>
<p>但是他的getters中定义的方法多了一个参数<strong>rootState</strong>，用于取得store的state中的数据</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">getters</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    
    <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        
        <span class="token keyword">return</span> state<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'11'</span>    
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    
    <span class="token function">fullName2</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>getters<span class="token punctuation">,</span>rootState</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        
        <span class="token keyword">return</span> getters<span class="token punctuation">.</span>fullName <span class="token operator">+</span> rootState<span class="token punctuation">.</span>counter    
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.fullName&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>&#123;&#123;$store.getters.fullName2&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h5 id="Actions-1"><a href="#Actions-1" class="headerlink" title="Actions"></a>Actions</h5><p>Actions中的编写方法也与store中的一样，不同的是，在module中的commit()方法，只<strong>对自己module中定义的子store的Mutation中的方法有用</strong>。</p>
<h3 id="方法属性映射"><a href="#方法属性映射" class="headerlink" title="方法属性映射"></a>方法属性映射</h3><h4 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h4><h4 id="mapGetters"><a href="#mapGetters" class="headerlink" title="mapGetters"></a>mapGetters</h4><p>当我们想要在组件模板中获取到Vuex中的数据需要像上方例子中，在Mustache语法中写一长串的表达式，而这在Vue的规范中并不推荐，因此我们更经常地将这些东西提取到计算属性中去计算完后再绑定在模板中。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;&#123;&#123;sum&#125;&#125;&lt;&#x2F;h1&gt;
    &lt;h1&gt;&#123;&#123;bigSum&#125;&#125;&lt;&#x2F;h1&gt;
    &lt;h3&gt;我叫&#123;&#123;name&#125;&#125;，学号&#123;&#123;stuNo&#125;&#125;&lt;&#x2F;h3&gt;
	……
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
  name: &#39;App&#39;,
  …………
  computed: &#123;
    sum() &#123;
      return this.$store.state.sum
    &#125;,
    name() &#123;
      return this.$store.state.name
    &#125;,
    stuNo() &#123;
      return this.$store.state.stuNo
    &#125;,
    bigSum() &#123;
      return this.$store.getters.bigSum
    &#125;
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这两个Vuex中的方法可以将store中state/getters中的属性映射到组件中，<strong>自动生成相应的计算属性</strong>，省去了自己写计算属性的麻烦。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
&#x2F;&#x2F; 引入两个方法
import &#123;mapState,mapGetters&#125; from &#39;vuex&#39;;
export default &#123;
  name: &#39;App&#39;,
  …………
  computed: &#123;
    &#x2F;&#x2F;对象写法：计算属性的名字对应Vuex中的属性名，key对应计算属性名，value对应Vuex中的属性名（要加引号）
    &#x2F;&#x2F;用spread将方法返回的计算属性展开使用
    ...mapState(&#123;
      sum:&#39;sum&#39;,
      name:&#39;name&#39;,
      stuNo:&#39;stuNo&#39;
    &#125;),
    ...mapGetters(&#123;
      bigSum:&#39;bigSum&#39;
    &#125;)
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">//数组写法：要求计算属性名和Vuex中的属性名一致，(数组元素既对应计算属性名也对应Vuex中的属性名，元素也需要加引号)</span>
  <span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'sum'</span><span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'stuNo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'bigSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h4><h4 id="mapActions"><a href="#mapActions" class="headerlink" title="mapActions"></a>mapActions</h4><p>我们不仅可以借助mapState和mapGetters来帮我们自动生成计算属性，我们也可以借助mapMutations和mapActions来帮我自动生成对应的方法，在方法中通过调用commit/dispatch方法去联系Mutations/Actions中的值。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;&#123;&#123;sum&#125;&#125;&lt;&#x2F;h1&gt;
    &lt;select v-model.number&#x3D;&quot;n&quot;&gt;
      &lt;option value&#x3D;&quot;1&quot;&gt;1&lt;&#x2F;option&gt;
      &lt;option value&#x3D;&quot;2&quot;&gt;2&lt;&#x2F;option&gt;
      &lt;option value&#x3D;&quot;3&quot;&gt;3&lt;&#x2F;option&gt;
    &lt;&#x2F;select&gt;
    &lt;button @click&#x3D;&quot;increament&quot;&gt;+&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;decreament&quot;&gt;-&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentOdd&quot;&gt;奇数时再加&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentWait&quot;&gt;等一秒再加&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123;mapState,mapGetters&#125; from &#39;vuex&#39;;
export default &#123;
  name: &#39;App&#39;,
  data() &#123;
    return &#123;
      n:1
    &#125;
  &#125;,
  methods: &#123;
    &#x2F;&#x2F;用commit调用Mutations中的方法
    increament() &#123;
      this.$store.commit(&#39;INCREAMENT&#39;,this.n)
    &#125;,
    decreament() &#123;
      this.$store.commit(&#39;DECREAMENT&#39;,this.n)
    &#125;,
    &#x2F;&#x2F;用dispatch调用Actions中的方法
    increamentOdd() &#123;
      this.$store.dispatch(&#39;increamentOdd&#39;,this.n)
    &#125;,
    increamentWait() &#123;
      this.$store.dispatch(&#39;increamentWait&#39;,this.n)
    &#125;
  &#125;,
	……
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>不一样的是，自动生成的方法若没有在调用时传值则会将<strong>鼠标事件</strong>作为默认值传给Actions\Mutations，因此我们在调用生成后的方法时<strong>需要直接将要用的参数传入</strong>。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    ……
    &lt;!--需要直接把n传给方法--&gt;
    &lt;button @click&#x3D;&quot;increament(n)&quot;&gt;+&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;decreament(n)&quot;&gt;-&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentOdd(n)&quot;&gt;奇数时再加&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentWait(n)&quot;&gt;等一秒再加&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123;mapState,mapGetters,mapMutations, mapActions&#125; from &#39;vuex&#39;;
export default &#123;
  name: &#39;App&#39;,
  data() &#123;
    return &#123;
      n:1
    &#125;
  &#125;,
  methods: &#123;
    &#x2F;&#x2F;对象写法：方法的名字对应Vuex中的方法名，key对应方法名，value对应Mutations中的方法名（要加引号）
    &#x2F;&#x2F;用spread将映射方法返回的方法展开使用
    ...mapMutations(&#123;
      increament:&#39;INCREAMENT&#39;,
      decreament:&#39;DECREAMENT&#39;
    &#125;),
      
    &#x2F;&#x2F;当两个地方的方法名相同时同样可以使用数组的写法
    &#x2F;&#x2F; ...mapActions(&#123;
    &#x2F;&#x2F;   increamentOdd:&#39;increamentOdd&#39;,
    &#x2F;&#x2F;   increamentWait:&#39;increamentWait&#39;
    &#x2F;&#x2F; &#125;)
    ...mapActions([&#39;increamentOdd&#39;,&#39;increamentWait&#39;])
  &#125;,
  ……
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h4><p>若使用Store里面的module模块化导入参数时，可以在每个模块中开启命名空间</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> sumAbout <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">//开启模块内命名空间</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">sum</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'wwh'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">stuNo</span><span class="token operator">:</span><span class="token string">'92'</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token constant">INCREAMENT</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      state<span class="token punctuation">.</span>sum <span class="token operator">+=</span> value
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token constant">DECREAMENT</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      state<span class="token punctuation">.</span>sum <span class="token operator">-=</span> value
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">increamentOdd</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREAMENT'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token function">increamentWait</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'INCREAMENT'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">bigSum</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>sum<span class="token operator">*</span><span class="token number">10</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">personList</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zs'</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    sumAbout
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="调用方式一"><a href="#调用方式一" class="headerlink" title="调用方式一"></a>调用方式一</h5><p>之后我们在使用上面四个方法进行映射时，可以在开头多加一个参数用来表示引用哪个模块（命名空间）中的方法，之后就不需要通过<code>.</code>的方式来获取Vuex中模块引入的参数</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;&#123;&#123;sum&#125;&#125;&lt;&#x2F;h1&gt;
    &lt;h1&gt;&#123;&#123;bigSum&#125;&#125;&lt;&#x2F;h1&gt;
    &lt;h3&gt;我叫&#123;&#123;name&#125;&#125;，学号&#123;&#123;stuNo&#125;&#125;&lt;&#x2F;h3&gt;
    &lt;select v-model.number&#x3D;&quot;n&quot;&gt;
      &lt;option value&#x3D;&quot;1&quot;&gt;1&lt;&#x2F;option&gt;
      &lt;option value&#x3D;&quot;2&quot;&gt;2&lt;&#x2F;option&gt;
      &lt;option value&#x3D;&quot;3&quot;&gt;3&lt;&#x2F;option&gt;
    &lt;&#x2F;select&gt;
    &lt;button @click&#x3D;&quot;increament(n)&quot;&gt;+&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;decreament(n)&quot;&gt;-&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentOdd(n)&quot;&gt;奇数时再加&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;increamentWait(n)&quot;&gt;等一秒再加&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123;mapState,mapGetters,mapMutations, mapActions&#125; from &#39;vuex&#39;;
export default &#123;
  name: &#39;App&#39;,
  data() &#123;
    return &#123;
      n:1
    &#125;
  &#125;,
  methods: &#123;
    ...mapMutations(&#39;sumAbout&#39;,&#123;
      increament:&#39;INCREAMENT&#39;,
      decreament:&#39;DECREAMENT&#39;
    &#125;),
    ...mapActions(&#39;sumAbout&#39;,[&#39;increamentOdd&#39;,&#39;increamentWait&#39;])
  &#125;,
  computed: &#123;
    ...mapState(&#39;sumAbout&#39;,[&#39;sum&#39;,&#39;name&#39;,&#39;stuNo&#39;]),
    ...mapGetters(&#39;sumAbout&#39;,[&#39;bigSum&#39;])
  &#125;
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h5 id="调用方式二"><a href="#调用方式二" class="headerlink" title="调用方式二"></a>调用方式二</h5><p>常规写法下，我们可以在要调用的属性或方法名之前加上命名空间，用来调用不同module中的属性方法</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
	import &#123;nanoid&#125; from &#39;nanoid&#39;
	export default &#123;
		name:&#39;Person&#39;,
		data() &#123;
			return &#123;
				name:&#39;&#39;
			&#125;
		&#125;,
		computed:&#123;
			personList()&#123;
				return this.$store.state.personAbout.personList
			&#125;,
			sum()&#123;
				return this.$store.state.countAbout.sum
			&#125;,
			firstPersonName()&#123;
				return this.$store.getters[&#39;personAbout&#x2F;firstPersonName&#39;]
			&#125;
		&#125;,
		methods: &#123;
			add()&#123;
				const personObj &#x3D; &#123;id:nanoid(),name:this.name&#125;
				this.$store.commit(&#39;personAbout&#x2F;ADD_PERSON&#39;,personObj)
				this.name &#x3D; &#39;&#39;
			&#125;,
			addWang()&#123;
				const personObj &#x3D; &#123;id:nanoid(),name:this.name&#125;
				this.$store.dispatch(&#39;personAbout&#x2F;addPersonWang&#39;,personObj)
				this.name &#x3D; &#39;&#39;
			&#125;,
			addPersonServer()&#123;
				this.$store.dispatch(&#39;personAbout&#x2F;addPersonServer&#39;)
			&#125;
		&#125;,
	&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="目录结构规范"><a href="#目录结构规范" class="headerlink" title="目录结构规范"></a>目录结构规范</h3><p>我们应该将Vuex中的mutations、getters、actions、modules抽离出来（state一般不抽出），以模块化的思想去建立store中的目录，然后全部导入到index.js将它们挂载到Vuex实例里面</p>
<ul>
<li>store<ul>
<li>modules<ul>
<li>moduleA.js</li>
<li>moduleB.js</li>
</ul>
</li>
<li>actions.js</li>
<li>getters.js</li>
<li>mutations.js</li>
<li>mutations-types.js</li>
<li>index.js</li>
</ul>
</li>
</ul>
<h1 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a>Vite</h1><p>官方文档：<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/installation.html#vite">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>
<p>vite官网：<a target="_blank" rel="noopener" href="https://vitejs.cn/">https://vitejs.cn</a></p>
<ul>
<li><p>什么是vite？—— 新一代前端构建工具。</p>
</li>
<li><p>优势如下：</p>
<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载（HMR）。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
</li>
<li><p>传统构建 与 vite构建对比图</p>
<ul>
<li><p>传统构建</p>
<ul>
<li><img src="https://cn.vitejs.dev/assets/bundler.37740380.png"/></li>
</ul>
</li>
<li><p>Vite构建</p>
<ul>
<li><img src="https://cn.vitejs.dev/assets/esm.3070012d.png"/></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">## 创建工程
npm init vite-app &lt;project-name&gt;
## 进入工程目录
cd &lt;project-name&gt;
## 安装依赖
npm install
## 运行
npm run dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Weihan Wu</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2022/05/16/vue-expand/">http://example.com/2022/05/16/vue-expand/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Weihan Wu</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/JavaScript/">
                                    <span class="chip bg-color">JavaScript</span>
                                </a>
                            
                                <a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">
                                    <span class="chip bg-color">前端工程化</span>
                                </a>
                            
                                <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">
                                    <span class="chip bg-color">前端开发</span>
                                </a>
                            
                                <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                                    <span class="chip bg-color">学习笔记</span>
                                </a>
                            
                                <a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/">
                                    <span class="chip bg-color">框架学习</span>
                                </a>
                            
                                <a href="/tags/Vue-js/">
                                    <span class="chip bg-color">Vue.js</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/05/16/vue3.x/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/17.jpg" class="responsive-img" alt="Vue3.x">
                        
                        <span class="card-title">Vue3.x</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Vue3.x进阶学习。
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-05-16
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Vue-js/" class="post-category">
                                    Vue.js
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JavaScript/">
                        <span class="chip bg-color">JavaScript</span>
                    </a>
                    
                    <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">
                        <span class="chip bg-color">前端开发</span>
                    </a>
                    
                    <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">学习笔记</span>
                    </a>
                    
                    <a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/">
                        <span class="chip bg-color">框架学习</span>
                    </a>
                    
                    <a href="/tags/Vue-js/">
                        <span class="chip bg-color">Vue.js</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/05/16/vue2.x/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="Vue2.x">
                        
                        <span class="card-title">Vue2.x</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Vue是一套用于构建用户界面的渐进式框架，可以将Vue作为应用的一部分嵌入其中，可以不断地将之前的代码进行重构，找工作必备。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-05-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Vue-js/" class="post-category">
                                    Vue.js
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JavaScript/">
                        <span class="chip bg-color">JavaScript</span>
                    </a>
                    
                    <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">
                        <span class="chip bg-color">前端开发</span>
                    </a>
                    
                    <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">学习笔记</span>
                    </a>
                    
                    <a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/">
                        <span class="chip bg-color">框架学习</span>
                    </a>
                    
                    <a href="/tags/Vue-js/">
                        <span class="chip bg-color">Vue.js</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022</span>
            
            <span id="year">2022</span>
            <a href="/about" target="_blank">Weihan Wu</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">165.3k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/weihan-wu" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:904698202@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=904698202" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 904698202" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
